# Feature

> 记录将要开发的功能

## 将自定义node节点抽离，将状态部分解耦

现状： 目前自定义节点中样式部分包含着状态处理与事件派发的逻辑，需要将其抽象解耦。

## 规范事件传参

事件需要向外暴露的信息需要完整，并且封装常用数据。

```ts
interface event {
    /**
     * 透传上层event对象。
     */ 
    event: any;
    /**
     * 触发对象的借点或边。
     */
    item: any;
    /**
     * item.getModel()。
     */ 
    model: any;
    /**
     * graph 实例，由于不能通过 item 获取到 graph 实例，所以需要显式传入，以备不时之需。
     */ 
    graph: any;
}
```

## 触发状态变更的时候需要传入graph实例

因为通过item不能获取到graph实例，而一些state可能需要使用graph实例

结果：

经过尝试，发现这条路根本行不通，因为定义state的时间点是在registerNode时候，此时的回调函数中，根本获取不到graph实例

所以要想通过实例做一些事情，需要在业务层处理了，核心层不关心这事了
